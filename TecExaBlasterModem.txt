
;PRECREATE SONG FILES

REPL MOVESONGFILE

;11 DIGIT PHONE #S
GRAB 301
LINK 800
MARK LOOPPHONENBRS
COPY 11 T
;HANGUP
COPY -1 #DIAL
;DIAL NEXT #
MARK DIALPHONE
  COPY F #DIAL
  SUBI T 1 T
TJMP DIALPHONE
REPL COPYOVERSONGS
TEST EOF
FJMP LOOPPHONENBRS
LINK -1
HALT


;SOURCE
MARK COPYOVERSONGS
;GET WORKER SONGS FILE
COPY M X
GRAB X
LINK 800
REPL SONGWRITER
;LOCAL MODE
MODE
;SONGS TO WRITE
MARK SENDSONG
  COPY F M
  COPY F M
  SEEK -2
JUMP SENDSONG

;TARGET
MARK SONGWRITER
GRAB 200
MODE
;OVERWRITE SONGS
MARK WRITESONG
  COPY M F
  COPY M F
  TEST EOF
FJMP WRITESONG
;KILL SOURCE
KILL
DROP
;DELETE SONGS FILE
GRAB X
WIPE
HALT



;PRECREATE SONG FILES
MARK MOVESONGFILE
;MOVE FILE AND SOURCECPY
GRAB 300
LINK 800
COPY F X
COPY F T
REPL TEMPSTORAGE
DROP
;8 RADIO STATIONS
;MAKE FILES
COPY 8 T
MARK SONGSCOPY
  MAKE
  COPY X F
  MODE
  COPY M F
  MODE
  FILE M
  DROP
  SUBI T 1 T
TJMP SONGSCOPY
GRAB 300
KILL
LINK -1
HALT

;TEMP 2ND VAL
MARK TEMPSTORAGE
;ASSUME T IS FILLED
MODE
MARK COPYVAL
COPY T M
JUMP COPYVAL