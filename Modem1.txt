;try to precreate song files for workers

REPL MOVESONGFILE

;11 DIGIT PHONE #S
GRAB 301
LINK 800
MARK LOOPPHONENBRS
COPY 11 T
;HANGUP
COPY -1 #DIAL
MARK DIALPHONE
  COPY F #DIAL
  SUBI T 1 T
TJMP DIALPHONE
REPL COPYOVERSONGS
;TIME TO CROSS
NOOP
TEST EOF
FJMP LOOPPHONENBRS
LINK -1
HALT


;SOURCE
MARK COPYOVERSONGS
;GET SONGS FILE
COPY M X
GRAB X
LINK 800
REPL SONGWRITER
MODE
;COPY FILENAME
MARK SENDSONG
  COPY F M
  COPY F M
  SEEK -2
JUMP SENDSONG

;TARGET
MARK SONGWRITER
GRAB 200
MODE
;FILENAME TO DELETE L8R
MARK WRITESONG
  COPY M F
  COPY M F
  TEST EOF
FJMP WRITESONG
;KILL SOURCE
KILL
DROP
GRAB X
WIPE
HALT


MARK MOVESONGFILE
;MOVE FILE AND SOURCECPY
GRAB 300
LINK 800
COPY F X
COPY F T
REPL TEMPSTORAGE
DROP

;8 RADIO STATIONS
;MAKE FILES
COPY 8 T
MARK SONGSCOPY
  MAKE
  COPY X F
  MODE
  COPY M F
  MODE
  FILE M
  DROP
  SUBI T 1 T
TJMP SONGSCOPY
GRAB 300
KILL
LINK -1
HALT

;TEMP 2ND VAL
MARK TEMPSTORAGE
;ASSUME T IS FILLED
MODE
MARK COPYVAL
COPY T M
JUMP COPYVAL

